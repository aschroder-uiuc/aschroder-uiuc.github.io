<!doctype html>
<html lang="en">
  <head>
    <title>Book Recommendations for Wikipedia Topics</title>
  </head>
  <body>
    <script src="lunr.js"></script>
    <script src="wikipedia.js"></script>
    <script src="recommendations.js"></script>
    <script src="utils.js"></script>
    <h1>Book Recommendations for Wikipedia Topics</h1>
    <p>Enter topic here:</p>
    <input type="text" id="searchInput" placeholder="Jupiter" />
    <button id="searchButton">Search</button>

    <div id="recommendations">This is the book recommendations div.</div>
    <p>------------------------------------------------------------</p>
    <div id="wikipedia">This is the wikipedia div.</div>

    <script>
      document
        .getElementById("searchButton")
        .addEventListener("click", async () => {
          const subject = document.getElementById("searchInput").value.trim();
          if (!subject) {
            alert("Please enter a search term to get a recommendation.");
            return;
          }

          const wikipediaText = await getWikipediaText(subject);
          document.getElementById("wikipedia").innerText = wikipediaText;
          const recommendation = getBookRecommendation(wikipediaText, subject);
          document.getElementById("recommendations").innerHTML = recommendation;
        });
    </script>
    <script>
      function getBookRecommendation(wikipediaText, subject) {
        const bookList = getBookList();
        const recommendation = recommendBooks(wikipediaText, bookList);
        const recommendationText = getRecommendationText(recommendation, subject);
        return recommendationText;
      }
    </script>
  </body>
</html>
